jQuery(function(j){"use strict";var e={containerSelector:".yith-wcbk-select-alt__container",openedClass:"yith-wcbk-select-alt__container--opened",unselectedClass:"yith-wcbk-select-alt__container--unselected",open:function(){j(this).closest(e.containerSelector).addClass(e.openedClass)},close:function(){j(this).closest(e.containerSelector).removeClass(e.openedClass)},blur:function(){j(this).trigger("blur")}};j(document).on("focusin",e.containerSelector+" select",e.open).on("focusout change",e.containerSelector+" select",e.close).on("change",e.containerSelector+" select",e.blur),j(document).on("yith-wcbk-init-fields:help-tip",function(){j(".yith-wcbk-help-tip:not(.yith-wcbk-help-tip--initialized)").each(function(){j(this).tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),j(this).addClass("yith-wcbk-help-tip--initialized")})}).trigger("yith-wcbk-init-fields:help-tip"),j(document).on("yith-wcbk-init-fields:selector",function(){j(".yith-wcbk-selector:not(.yith-wcbk-selector--initialized)").each(function(){var t=j(this),i=t.data("placeholder"),e=t.data("options"),l=t.data("selected"),n=!!t.data("multiple"),c=!!t.data("allow-clear"),a={},o={},s={field:t.find(".yith-wcbk-selector__field"),head:t.find(".yith-wcbk-selector__head"),label:t.find(".yith-wcbk-selector__label"),labelImage:t.find(".yith-wcbk-selector__label__image"),dropdown:t.find(".yith-wcbk-selector__dropdown, .yith-wcbk-selector__list"),close:t.find(".yith-wcbk-selector__close"),clear:t.find(".yith-wcbk-selector__clear"),items:t.find(".yith-wcbk-selector__item")},d=function(e){return e in a&&a[e]},r=function(){return t.hasClass("yith-wcbk-selector--opened")},h=function(e){return e in o&&"label"in o[e]?o[e].label:""},b=function(e){return e in o&&"image"in o[e]?o[e].image:""},f=function(){return n?!!l.length:!!l},u=function(){var e;f()?(n?(e=(e=l.map(h)).filter(function(e){return!!e}),s.label.html(e.join(", "))):(e=b(l),s.label.html(h(l)),s.labelImage.html(e),e?s.head.removeClass("yith-wcbk-selector__head--no-image"):s.head.addClass("yith-wcbk-selector__head--no-image")),s.label.addClass("yith-wcbk-selector__label--selected"),s.label.removeClass("yith-wcbk-selector__label--placeholder")):(s.label.html(i),s.label.removeClass("yith-wcbk-selector__label--selected"),s.label.addClass("yith-wcbk-selector__label--placeholder"),s.head.addClass("yith-wcbk-selector__head--no-image"))},p=function(){var e;s.items.removeClass("yith-wcbk-selector__item--selected"),f()&&(n?j.each(l,function(e,t){t=d(t);t&&t.addClass("yith-wcbk-selector__item--selected")}):(e=d(l))&&e.addClass("yith-wcbk-selector__item--selected"))},w=function(){f()?t.addClass("yith-wcbk-selector--selected"):t.removeClass("yith-wcbk-selector--selected")},y=function(e){l=e,t.data("selected",l),k()},k=function(){p(),u(),w(),s.field.val(l).trigger("change")},_=function(e){var t,i;return n?(-1<(i=(t=l.slice()).indexOf(e))?t.splice(i,1):t.push(e),t):e},g=function(e){y(_(e))},m=function(){c&&(y(n?[]:""),z())},v=function(){n||z()},C=function(){(r()?z:S)()},S=function(){t.addClass("yith-wcbk-selector--opened");var e=s.dropdown.get(0).getBoundingClientRect();!(s.head.get(0).getBoundingClientRect().y>e.height)||window.innerHeight>=e.y+e.height?(t.addClass("yith-wcbk-selector--opened--below"),t.removeClass("yith-wcbk-selector--opened--above")):(t.addClass("yith-wcbk-selector--opened--above"),t.removeClass("yith-wcbk-selector--opened--below"))},z=function(){t.removeClass("yith-wcbk-selector--opened"),t.removeClass("yith-wcbk-selector--opened--below"),t.removeClass("yith-wcbk-selector--opened--above")};j.each(e,function(e,t){o[t.key]=t}),s.items.each(function(){var e=j(this),t=e.data("key");a[t]=e}),document.addEventListener("click",function(e){s.close.length&&s.close.get(0).contains(e.target)?(e.preventDefault(),z()):s.clear.length&&s.clear.get(0).contains(e.target)?(e.preventDefault(),m()):s.dropdown.length&&s.dropdown.get(0).contains(e.target)||(s.head.length&&s.head.get(0).contains(e.target)?(e.preventDefault(),C):z)()},!0),s.items.on("click",function(e){e=j(e.target).closest(".yith-wcbk-selector__item").data("key");g(e),v()}),t.addClass("yith-wcbk-selector--initialized")})}).trigger("yith-wcbk-init-fields:selector"),j(document).on("yith-wcbk-init-fields:select-list",function(){j(".yith-wcbk-select-list:not(.yith-wcbk-select-list--initialized)").each(function(){var t=j(this),i=t.data("empty-message"),l={option:"yith-wcbk-select-list__option",optionSkeleton:"yith-wcbk-select-list__option-skeleton",selected:"yith-wcbk-select-list__option--selected",emptyMessage:"yith-wcbk-select-list__empty-message"},n={field:t.find("select.yith-wcbk-select-list__field"),container:t.find(".yith-wcbk-select-list__options")},c=function(e){t.data("is-loading",e)},a=function(){return t.data("is-loading")},e=function(){n.container.html("");var e=n.field.find('option[value!=""]');e.length?e.each(function(){var e=[l.option,j(this).is(":selected")?l.selected:""].filter(Boolean).join(" "),t=j("<div />");t.addClass(e),t.attr("data-value",j(this).val()),t.html(j(this).html()),n.container.append(t)}):a()?(e=j("<div />").addClass(l.optionSkeleton),n.container.append(e.clone()),n.container.append(e.clone()),n.container.append(e.clone())):i&&n.container.append(j("<div />").addClass(l.emptyMessage).html(i)),c(!1)},o=function(){var e=n.field.val();n.container.find("."+l.selected).removeClass(l.selected),n.container.find("."+l.option+'[data-value="'+e+'"]').addClass(l.selected)},s=function(e){e=j(e.target).data("value");n.field.val(e),n.field.trigger("change")};e(),n.field.on("yith-wcbk-select-list:update",e),n.field.on("change",o),n.container.on("click","."+l.option,s),t.addClass("yith-wcbk-select-list--initialized")})}).trigger("yith-wcbk-init-fields:select-list")});